<?php
/**
 * View Name: login
 * Path: view/login
 * @param array $data arguments passed from controller
 */

$value = has_flash('form_data') ? (object) get_flash('form_data') : false;
$redirect = isset($context['query']['redirect']) ? '?redirect='.$context['query']['redirect'] : '';
?>

{{ title = "Login | <?=APP_NAME?>" }}
{{ body_class = "auth" }}

{{ content }}
<section class="auth">
  <div class="auth-card">

    <h1 class="auth-title">Login</h1>

    <form method="post" action="<?=AUTH_PATHS['login'].$redirect?>" class="form">
      <?=CSRF_FIELD?>

      <div class="form-group">
        <input type="email" name="email" placeholder="Email"
          class="form-input <?=has_error('email') ? 'is-error' : '' ?>"
          value="<?=$value->email ?? ''?>">
        <?=show_error('email', '<span class="form-error">##</span>')?>
      </div>

      <div class="form-group">
        <input type="password" name="password" placeholder="Password"
          class="form-input <?=has_error('password') ? 'is-error' : '' ?>">
        <?=show_error('password', '<span class="form-error">##</span>')?>
      </div>

      <?=show_error('success', '<p class="form-message success">##</p>')?>
      <?=show_error('error', '<p class="form-message error">##</p>')?>

      <button class="app-button app-button--primary is-full">Login</button>
    </form>

    <div class="auth-footer">
      <a href="<?=AUTH_PATHS['signup']?>">Create account</a>
      Â·
      <a href="<?=AUTH_PATHS['forgot_password']?>">Forgot password?</a>
    </div>

  </div>
</section>
{{ content-end }}
